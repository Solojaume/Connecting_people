<main class="content" id="body">
    <div class="container p-0">
		
		<div class="card">
			<div class="row g-0">
				<div class="col-12 col-lg-5 col-xl-3 align-items-center border-right">

					<div class="px-4 d-none d-md-block">
						<div class="d-flex align-items-center">
							<div class="flex-grow-1">
								<input type="text" class="form-control my-3" placeholder="Search...">
							</div>
						</div>
					</div>
					
					<app-desplegable class="" [tipo_objeto]="'match'" [lista_objetos]="socketService.matches_public" (chatEvent)="cargarChat($event)"  ></app-desplegable>
					<app-desplegable class="m-2" [tipo_objeto]="'chats'" [lista_objetos]="socketService.chats" (chatEvent)="cargarChat($event)"  ></app-desplegable>
					
				</div>
				<div class="col-12 col-lg-7 col-xl-9">
					<div class="py-2 px-4 border-bottom d-none d-lg-block">
						<div class="d-flex align-items-center py-1">
							<div class="position-relative">
								<app-imagenes [config]="config" [imagenes]="socketService.chatUsar.match_id_usu2.fotos"></app-imagenes>
							</div>
							<div class="flex-grow-1 pl-3 m-2">
								<strong>{{socketService.chatUsar.match_id_usu2.nombre}}</strong>
								<div class="text-muted small" *ngIf="socketService.chatUsar.estado_conexion_u2=='Conectado'"> <em>Online</em> </div>
								<div class="text-muted small" *ngIf="socketService.chatUsar.estado_conexion_u2=='Escriviendo'"> <em>Typing...</em></div>
								<div class="text-muted small" *ngIf="socketService.chatUsar.estado_conexion_u2=='Desconectado'"> <em>Offline </em></div>
							</div>
							<div>
								
								<button class="btn btn-light border btn-lg px-3">Review</button>
							</div>
						</div>
					</div>

					<div class="position-relative">
						<div class="chat-messages p-4">					
						
							<div *ngFor="let chatMessage of socketService.mensajes[socketService.chatUsar.match_position]">
								<app-mensaje class="position-relative" [mensaje]="chatMessage" [u2]="socketService.chatUsar.match_id_usu2"></app-mensaje>
							</div>
						
						</div>
					</div>

					<form (ngSubmit)="sendMessage()" [formGroup]="formularioEnvio">
						<div class="flex-grow-0 py-3 px-4 border-top">
							<div class="input-group">
								<input type="text" class="form-control" formControlName="message" placeholder="Type your message" >
								<button type="submit" class="btn btn-primary">Send</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</main>